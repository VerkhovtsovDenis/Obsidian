# Конспект: Сортировочная станция и Стековая машина 
 
## Что такое стек? 
Стек (stack) — это структура данных, работающая по принципу LIFO (Last In, First Out): последний добавленный элемент извлекается первым.   
Основные операции: 
- Push: добавление элемента. 
- Pop: удаление и возврат верхнего элемента. 
- Peek (Top): просмотр верхнего элемента без удаления. 
 
Пример стека: 
1. Push(5) → стек: [5] 
2. Push(3) → стек: [5, 3] 
3. Pop() → стек: [5], возвращается 3. 
 
--- 
 
## Алгоритм «Сортировочная станция» 
Используется для преобразования выражения из инфиксной записи (например, 3 + 5 * 2) в постфиксную (RPN).   
Пример: 
- Вход: 3 + 5 * 2 
- Выход: 3 5 2 * + 
 
Основные этапы алгоритма: 
1. Числа добавляются в выходную строку. 
2. Операторы (+, -, *, /) отправляются в стек, соблюдая приоритеты: 
   - Скобки: ( имеет минимальный приоритет, закрывающая ) вызывает выгрузку стека. 
   - Операторы с высоким приоритетом (*, /) обрабатываются раньше, чем с низким (+, -). 
3. В конце стек выгружается в выходную строку. 
 
--- 
 
## Комментарии к коду 
 
```pascal 
type 
    stack = ^elem; // Определение структуры стека как указателя на элемент 
 
    elem = record 
        data: string; // Хранит данные стека (строки) 
        next: stack;  // Указывает на следующий элемент 
    end; 
 
var 
    st: stack; // Переменная для работы со стеком 
 
    operation := ['+', '-', '*', '/', '~', '^']; // Допустимые операции 
    prioritySym := ['(', ')']; // Скобки для управления приоритетами 
 
// Функция вычисления приоритета операторов 
function priority(c: string): integer; 
begin 
    case c[1] of 
        '(', ')': priority := 0; // Скобки имеют самый низкий приоритет 
        '+', '-': priority := 1; // Сложение и вычитание 
        '*', '/': priority := 2; // Умножение и деление 
        '^': priority := 3;      // Возведение в степень 
        '~': priority := 4;      // Унарный минус (высший приоритет) 
    else 
        priority := -1; // Для некорректных символов 
    end; 
end; 
 
// Операция pop: удаляет и возвращает верхний элемент стека 
function pop(var head: stack): string; 
begin 
    if(head <> nil) then 
    begin 
        pop := head^.data;       // Сохраняем данные верхнего элемента 
        var q := head;           // Временная переменная для удаления 
        head := head^.next;      // Сдвигаем указатель вниз 
        Dispose(q);              // Освобождаем память 
    end 
    else 
    begin 
        pop := 'q';              // Возвращаем 'q', если стек пуст 
    end; 
end; 
 
// Операция push: добавляет элемент в стек 
procedure push(var head: stack; a: string); 
begin 
    if(head <> nil) then 
    begin 
        var T: stack;            // Создаем новый элемент 
        new(T); 
        T^.data := a;            // Записываем данные 
        T^.next := head;         // Новый элемент ссылается на предыдущий 
        head := T;               // Новый элемент становится вершиной 
    end 
    else 
    begin 
        new(head);               // Если стек пуст, создаем первый элемент 
        head^.data := a; 
        head^.next := nil; 
    end; 
end;

```
