# Приложения в Django-проекте

Django-проекты состоят из отдельных частей — **приложений** (_application_, сокращённо _app_). Каждое приложение предназначено для выполнения отдельной задачи. Например, в интернет-магазине одно приложение может отвечать за управление товарами и каталогом, другое — за заказы, третье — за доставку, четвёртое — за публикацию информационных статей или рекламы.

![](https://pictures.s3.yandex.net/resources/23_1682502903.png)

Благодаря идее независимых приложений эту структуру можно легко дополнить. Например, можно добавить приложения, управляющие купонами на скидку, пользовательскими рейтингами товара или системой отзывов.

Независимые приложения хороши и тем, что их можно использовать повторно. Чем писать код с нуля — быстрее и проще взять готовое приложение, написанное для другого проекта.

> Хорошо спроектированное приложение должно решать только одну задачу. В противном случае его будет сложно переносить.

Плохо спроектированное приложение выглядит так: в интернет-магазине приложение `catalog` одновременно отвечает и за каталог товаров, и за корзину онлайн-заказа. Если в другом проекте понадобится только каталог товаров, а система заказов не потребуется, приложение `catalog` не удастся повторно использовать (или придётся серьёзно «поработать напильником», отпиливая корзину от этого приложения).

В хорошо спроектированном интернет-магазине каталог будет обрабатываться одним приложением, а корзина — другим. Чем меньше кирпичик, тем он универсальнее.

### Создание первого приложения

Создание приложений в Django автоматизировано и выполняется в несколько этапов:

- Придумать имя для приложения.
- Сгенерировать структуру файлов нового приложения.
- Зарегистрировать приложение в проекте.

### Как выбрать хорошее имя для приложения?

Желательно, чтобы название приложения состояло из одного слова в нижнем регистре: catalog, coupons, blog, posts, cart, orders. Название приложения может быть во множественном или в единственном числе и состоять из одного или нескольких слов; слова в названии разделяются подчёркиванием, например: ice_cream или where_is_my_lunch.

### Создание файловой структуры приложения

Из директории, где расположен файл _manage.py_, выполните команду:

```
# Вызываем управляющий файл manage.py;
# startapp catalog — команда «создать приложение с именем catalog».
python manage.py startapp catalog 
```

После выполнения команды в директории проекта будет создана новая папка:

Скопировать код

```
jump_into_django/
 ├── ...
 └── acme_project/               <-- Рабочая папка проекта
     ├── catalog/                <-- Созданное приложение
     |   ├── migrations/
     |   |   └── __init__.py
     |   ├── __init__.py
     |   ├── admin.py
     |   ├── apps.py
     |   ├── models.py
     |   ├── tests.py
     |   └── views.py
     ├── acme_project/           <-- Папка с настройками проекта 
     └── manage.py 
```

Команда `startapp` создаёт базовую структуру файлов, которая, по мнению разработчиков Django, пригодится для любого приложения. При этом никакой магии не происходит: все эти файлы можно создать и вручную, но автоматически — удобнее и быстрее.

- `migrations/` — хранит историю изменений структуры таблиц базы данных, относящихся к приложению;
- `__init__.py` — указывает интерпретатору Python, что этот каталог — пакет Python;
- `admin.py` — настройки админ-зоны приложения;
- `apps.py` — настройки приложения;
- `models.py` — файл для взаимодействия с базой данных;
- `tests.py` — файл для тестов приложения;
- `views.py` — файл для обработчиков запросов.

### Регистрируем приложение

Чтобы подключить в проект новое приложение, его нужно зарегистрировать в списке установленных приложений `INSTALLED_APPS` в файле _settings.py_:

Скопировать кодPYTHON

```
# acme_project/settings.py

INSTALLED_APPS = [    
    'catalog.apps.CatalogConfig',  # Добавляем эту строчку
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',    
] 
```

Строчка `catalog.apps.CatalogConfig` ссылается на класс `CatalogConfig` файла _apps.py_ в папке _catalog_; адрес указывается через точечную нотацию: `директория.файл.класс`:

Скопировать кодPYTHON

```
# catalog/apps.py
from django.apps import AppConfig

class CatalogConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'catalog' 
```

И из этого класса Django проект получит название приложения.

Итог: приложение `catalog` создано и зарегистрировано. Пока оно ничего не умеет, но это дело поправимое.

## На заметку

В некоторых книгах и статьях предлагается регистрировать приложение так: добавлять в `INSTALLED_APPS` не имя конфигурирующего класса `catalog.apps.CatalogConfig`, а просто имя приложения — `'catalog'`. Но разработчики Django рекомендуют регистрировать приложения через конфигурирующий класс.

Шпаргалка

[Создание Django-проекта](https://code.s3.yandex.net/b2b/grade/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_Django-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0.pdf?etag=3449d07995908af75f4242525166307e)

Что случилось с тренажёром?

В общем-то — ничего не случилось, он почти тот же, что и был, но теперь он больше и интереснее.

Django-проект включает множество файлов, и все они доступны вам в тренажёре, в файловом браузере; папки разворачиваются, файлы открываются — и вы можете делать с ними всё, что считаете нужным. Если всё сломается — нажмите кнопку «Начать заново»; проект перезагрузится и станет как новенький (при этом потеряются все изменения, которые вы внесли).

## И как с этим работать?

Первым делом надо решить задачу: написать или изменить код в соответствии с заданием.

Django-проект работает на сервере, а код вы пишете в браузере у себя на компьютере. Чтобы отправить задание на проверку или просто посмотреть, к какому результату привела ваша работа — нажмите кнопку «Задеплоить»; при этом ваш код будет отправлен на сервер.

После этого можно посмотреть, как выглядит ваш проект в работе; посмотреть на него можно во встроенном окне тренажёра, а можно открыть его во весь экран в новом окне браузера (ссылка есть в верхней правой части тренажёра). Страницу, открытую в отдельном окне браузера, надо обновлять после каждого деплоя.

![](https://pictures.s3.yandex.net/resources/113_1687357651.png)

Как правило, при возникновении ошибок тренажёр сообщает вам о них во всплывающем окне; но бывают случаи, когда ошибка есть, а сообщения нет. В этом случае обязательно заглядывайте во встроенный терминал тренажёра. Он работает точно так же, как в вашем настольном редакторе кода, и в нём может быть полезная информация о причинах проблем.

![](https://pictures.s3.yandex.net/resources/114_1687357662.png)

В терминале может оказаться много полезного:

![](https://pictures.s3.yandex.net/resources/115_1687357672.png)

## Лайфхак

Если по каким-то причинам вам неудобно работать над заданием в тренажёре — скачайте Django-проект себе на компьютер, выполните задание в настольном редакторе, и когда задача будет решена — скопируйте свой код в тренажёр, задеплойте проект и нажмите «Проверить».