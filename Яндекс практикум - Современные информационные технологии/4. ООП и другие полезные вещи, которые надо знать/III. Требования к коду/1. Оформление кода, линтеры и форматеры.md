Любой код, даже написанный для личного использования, лучше писать так, чтобы он был легкочитаемым и структурированным. Может наступить момент, когда возникнет необходимость поделиться этим кодом с другими разработчиками, и если код будет неструктурированным или сложным для понимания, это может вызвать сомнения в навыках автора кода.

---
> Соотношение времени чтения и написания кода превышает 10:1. …Из-за столь высокого соотношения наш код должен легко читаться, даже если это затрудняет его написание.

\- Роберт Мартин, «Чистый код: создание, анализ и рефакторинг»

---



**Текст можно написать так:**

Дажесамыйпростойтекст вкотороместьсмыслинеобходимаяинформация будетсложнопрочестьесливнёмнесоблюдены правилаоформленияипунктуации словаприняторазделятьпробеламипредложенияточками новуюмысльначинаютсновогоабзацаановоепредложениесбольшойбуквы еслитекстнаписанбезсоблюденияэтихправилеговсёравноможнопрочестьипонять ноэтостановитсятяжёлымиспытанием тожеискодомонбудетработатьибезоформления нопрочестьипонятьегобудеттрудно

**А можно так:**

Даже самый простой текст, в котором есть смысл и необходимая информация, будет сложно прочесть, если в нём не соблюдены правила оформления и пунктуации.

Слова принято разделять пробелами, предложения — точками. Новую мысль начинают с нового абзаца, а новое предложение — с большой буквы.

Если текст написан без соблюдения этих правил, его всё равно можно прочесть и понять, но это становится тяжёлым испытанием.

То же и с кодом: он будет работать и без оформления. С технической точки зрения этот код не содержит ошибок:
```python
courses = {'Python-разработчик': {'Стек': {'Python','Django','GitHub','SQL','PostgreSQL','Bash','Nginx','Gunicorn','Docker','Docker Hub'},'Продолжительность': '9 месяцев'},'Python-разработчик плюс': {'Стек': {'Python','Django','GitHub','SQL','PostgreSQL','Bash','Nginx','Gunicorn','Docker','Docker Hub','Flask','FastAPI','Scrapy','Selenium','SQLAlchemy'},'Продолжительность': '14 месяцев'}}
diff = set.difference(courses['Python-разработчик плюс']['Стек'], courses['Python-разработчик']['Стек'])
courses_diff = str.join(', ', diff)
print(f'Отличия стеков в курсах «Python-разработчик плюс» и «Python-разработчик»: {courses_diff}') 
```

Однако прочесть и понять этот код трудно. Гораздо лучше, если код отформатирован:

```python
courses = {
    'Python-разработчик': {
        'Стек': {
            'Python',
            'Django',
            'GitHub',
            'SQL',
            'PostgreSQL',
            'Bash',
            'Nginx',
            'Gunicorn',
            'Docker',
            'Docker Hub'
        },
        'Продолжительность': '9 месяцев'
    },
    'Python-разработчик плюс': {
        'Стек': {
            'Python',
            'Django',
            'GitHub',
            'SQL',
            'PostgreSQL',
            'Bash',
            'Nginx',
            'Gunicorn',
            'Docker',
            'Docker Hub',
            'Flask',
            'FastAPI',
            'Scrapy',
            'Selenium',
            'SQLAlchemy'
        },
        'Продолжительность': '14 месяцев'
    }
}

diff = set.difference(
    courses['Python-разработчик плюс']['Стек'],
    courses['Python-разработчик']['Стек']
)
courses_diff = str.join(', ', diff)

print(
    'Отличия стеков в курсах «Python-разработчик плюс» и '
    f'«Python-разработчик»: {courses_diff}'
) 
```

Код оформляют по определённым стандартам: правильно оформленный код будет удобно читать любому, кто его откроет.

В Python есть набор универсальных правил, он принят всем сообществом Python-разработчиков: это [правила оформления кода PEP 8](https://peps.python.org/pep-0008/). Правила PEP 8 применяются и в Практикуме.

### Основные правила PEP 8

- Длина строки не должна превышать 79 символов.
- Отступы вложенных блоков кода — 4 пробела.
- Стиль именования переменных и функций соответствует разделу [PEP 8: Naming Conventions](https://peps.python.org/pep-0008/#prescriptive-naming-conventions).
- При переносе строк необходимо следовать [правилам отступов](https://peps.python.org/pep-0008/#indentation).
- Применять бэкслеши `\` для переноса строк не рекомендуется.
- В коде не должно быть неиспользуемых импортов.
- Импорты в коде следует описывать согласно иерархии, в таком порядке: 1. Импорты из стандартной библиотеки. 2. Импорты из сторонних библиотек.  
    Внутри каждой группы импорты следует сортировать в алфавитном порядке.
- Функции, объявленные на верхнем уровне программы (не вложенные в другие блоки кода), должны разделяться двумя пустыми строками.
- В коде проекта должны применяться кавычки одного типа: либо одинарные, внутри которых при необходимости используются двойные, либо наоборот. В Практикуме применяются одинарные кавычки.
- Комментарии должны начинаться со знака `#`. Символ `#` от текста комментария отделяется одним пробелом. Комментарий должен быть выровнен с кодом, к которому он относится, и следовать тем же правилам отступов.
- Если комментарий размещён в той же строке, что и код, между кодом и комментарием должно быть два пробела.
- Комментарий должен начинаться с заглавной буквы, а после комментария ставится точка: комментарий оформляется так же, как предложение в обычном тексте.
- Строка комментария не должна превышать 72 символа.

### Линтеры

Проконтролировать соответствие кода установленным стандартам можно с помощью программ-**линтеров**. Слово _linter_ в переводе с английского обозначает ролик для чистки одежды от ворсинок и пыли.

![На иллюстрации отображена ассоциация «линтер — ролик для чистки одежды»: большой ролик для чистки одежды как будто чистит код программы.](https://pictures.s3.yandex.net/resources/image_1701332832.png)

Например, линтер может найти в коде объявленные, но незадействованные переменные и функции, отсутствие круглых скобок, незакрытые кавычки и даже более тонкие проблемы — например, попытку использовать имена, совпадающие с именами встроенных типов данных или функций.

### Включение линтера в VS Code

Линтер можно установить как расширение для VS Code — скачать расширения можно в [Marketplace](https://marketplace.visualstudio.com/vscode).

Например, там есть:

|Линтер|Расширение|
|---|---|
|Pylint|[https://marketplace.visualstudio.com/items?itemName=ms-python.pylint](https://marketplace.visualstudio.com/items?itemName=ms-python.pylint)|
|Flake8|[https://marketplace.visualstudio.com/items?itemName=ms-python.flake8](https://marketplace.visualstudio.com/items?itemName=ms-python.flake8)|
|Mypy|[https://marketplace.visualstudio.com/items?itemName=ms-python.mypy-type-checker](https://marketplace.visualstudio.com/items?itemName=ms-python.mypy-type-checker)|

Проверка ваших самостоятельных заданий будет проводиться с помощью линтера **Flake8**, и вы сможете избежать многих ошибок, если тоже будете проверять свой код с его помощью.

Этот линтер сочетает в себе функциональность нескольких анализаторов кода и весьма популярен среди разработчиков на Python.

Перейдите [по ссылке на страницу Flake8 в Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=ms-python.flake8) или найдите линтер **Flake8** через интерфейс VS Code:

![На скриншоте — интерфейс VSCode. Чтобы найти линтер Flake8, нужно в левом боковом меню выбрать пункт Extensions, в строку поиска ввести flake8, в результатах поиска выбрать линтер и нажать кнопку Install.](https://pictures.s3.yandex.net/resources/image_1702056437.png)

После установки линтера Flake8 он будет автоматически запускаться при открытии любого Python-файла в VS Code.

Описание замечаний можно будет найти во вкладке **PROBLEMS**.

![На скриншоте — вкладка PROBLEMS в интерфейсе VSCode с замечаниями: 1. line too long (88 > 79 characters) 2. ‘program’ imported but unused.](https://pictures.s3.yandex.net/resources/image_1701332940.png)

Строки, в которых найдены проблемы, будут подчёркнуты прямо в коде:

![На скриншоте — интерфейс VSCode: если кликнуть на конкретное замечание во вкладке PROBLEMS, в коде выделится строка, к которой относится замечание.](https://pictures.s3.yandex.net/resources/image_1701332951.png)

### Дополнения для Flake8

Для Flake8 существуют дополнения, или плагины, улучшающие его функциональность. Они предназначены для проверки конкретных аспектов кода на соответствие стандартам.

Эти плагины устанавливают в активированное виртуальное окружение через терминал с помощью менеджера пакетов pip.

Устанавливайте этот набор плагинов в те виртуальные окружения, где это необходимо; они помогут вам избежать ошибок в оформлении кода:

- [pep8-naming](https://github.com/PyCQA/pep8-naming): проверяет именование классов, функций и переменных в соответствии с PEP 8;
- [flake8-isort](https://github.com/gforcada/flake8-isort): проверяет корректность последовательности импортов.

Команды для установки можно найти по ссылкам.

### Включение форматера в VS Code

Линтеры помогают избежать огромного количества неприятностей, анализируя код на предмет общих синтаксических, стилистических и функциональных ошибок. Они выступают в роли первой линии обороны, предохраняя от многих распространённых проблем.

Но линтеры обращают внимание в основном на техническую и структурную сторону кода, оставляя в стороне его визуальное представление и читаемость.

И здесь на сцену выходят **форматеры кода**. Если линтеры помогают разработчикам писать правильный код, то форматеры заботятся о том, чтобы этот код был написан красиво и читаемо. Форматеры автоматически структурируют код, следуя заданным стилевым правилам и конвенциям.

Например, форматер может автоматически выставить межстрочные интервалы, отступы и пробелы вокруг операторов. В итоге код становится более организованным и понятным.

> [!done] 💡 Форматирование влияет на читаемость, но не влияет на функциональность самого кода.

Форматер тоже можно (и нужно!) установить в качестве плагина к вашему редактору кода. Для VS Code есть, например, форматеры [autopep8](https://marketplace.visualstudio.com/items?itemName=ms-python.autopep8) и [Black Formatter](https://marketplace.visualstudio.com/items?itemName=ms-python.black-formatter).

Какой форматер использовать и использовать ли его вообще — решение за вами. Но помните, что при проверке самостоятельных работ форматирование кода тоже будет учитываться.

Чтобы результат работы выбранного форматера соответствовал стилю Практикума, может потребоваться его дополнительная настройка.

После установки форматера его стоит установить по умолчанию для файлов Python в VS Code. Для этого выполните следующие действия:

1. Откройте в VS Code любой файл с расширением _.py_.
2. Щёлкните правой кнопкой мыши на редакторе, чтобы вызвать контекстное меню.
3. Выберите пункт _Format Document With..._
4. В раскрывающемся меню выберите _Configure Default Formatter.._.
5. Выберите из списка нужный форматер.

После этого отформатировать код можно, щёлкнув правой кнопкой мыши на редакторе и выбрав пункт _Format Document_.

## Задание

Стас Басов получил задание написать программу, которая складывает два числа, передаваемых в качестве аргументов функции.

Стас написал код:
```python
import sys;
def add(x,y):
  return x+y;
x = 10
y = 5;
print("Сумма чисел: ",add(x,y)) 
```

Однако он забыл про стандарты PEP 8 и про код-стайл Практикума.

Исправьте все проблемы с форматированием и стилем в этом коде, следуя рекомендациям Практикума и PEP 8.
```python
import sys;
def add(x,y):
  return x+y;

x = 10
y = 5;

print("Сумма чисел: ",add(x,y))
```

Подсказка:
Вот некоторые моменты, на которые стоит обратить внимание:

1. Отсутствие пробелов вокруг операторов и после запятых.
2. Импорт модулей.
3. Именование функций и переменных.
4. Тип используемых кавычек.
5. Лишние элементы синтаксиса.

Оформить код по правилам поможет документация [Flake8](https://www.flake8rules.com/) и [PEP 8](https://peps.python.org/pep-0008/).