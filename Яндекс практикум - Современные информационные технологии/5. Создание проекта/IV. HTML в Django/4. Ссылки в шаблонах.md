# Ссылки в шаблонах: name и namespace

Ссылки в HTML-шаблонах Django могут выглядеть точно так же, как в обычном HTML:

```html
<a href="catalog/">
  Список товаров
</a> 
```

Но если ссылки во всех шаблонах проекта заданы именно так, а адреса страниц потребуется изменить, то придётся вручную менять адреса в каждом шаблоне.

Было бы здорово вместо конкретных адресов задать в шаблонах переменные, а управлять ссылками из какого-то единого центра, передавая в эти переменные нужные значения.

Эта идея пришла в голову и разработчикам шаблонизатора.

«Центр управления ссылками» — это файл _urls.py_, ведь именно там задаются все URL, которые может обработать проект. В _urls.py_ всем `path()` можно присвоить имена — и эти имена указывать в шаблонах вместо конкретных адресов.

Присваиваем каждому URL специальное имя, оно указывается в параметре `name` функции `path()`:

Скопировать кодPYTHON

```python
# catalog/urls.py

urlpatterns = [
    # Имя для URL лучше задавать такое же, как и имя функции. 
    # Легко запомнить, просто понять:
    path('catalog/', views.product_list, name='product_list'),  
    path('catalog/<int:pk>/', views.product_detail, name='product_detail'),
] 
```

В шаблоне вместо конкретного адреса в атрибуте `href` указываем специальный тег `{% url имя_ссылки %}`. Если в пути применяются аргументы, их тоже можно указать.

```html
<!-- Вместо <a href="catalog/"> -->
<a href="{% url 'product_list' %}">
  Страница со списком товаров
</a>

<!-- Вместо <a href="catalog/1/"> -->
<a href="{% url 'product_detail' 1 %}">
  Страница c товаром номер 1
</a> 
```

При рендеринге на место тега в шаблон будут вставлены реальные URL из `path()` с указанным `name`:

```html
<a href="catalog/">
  Страница со списком товаров
</a>

<a href="catalog/1/">
  Страница c товаром номер 1
</a> 
```

Если при изменении структуры проекта или по просьбе `SEO-оптимизатора` потребуется изменить ссылки, достаточно заменить адрес в `path()`:

```python
# catalog/urls.py

urlpatterns = [
    path('new_link/', views.product_list, name='product_list'),
    path('new_link/<int:pk>/', views.product_detail, name='product_detail'),
] 
```

В шаблонах ничего менять не придётся: адрес автоматически подтянется из нужного `path()`. И при рендеринге на странице будет новая ссылка:

```django
<a href="new_link/">
  Страница со списком товаров
</a>

<a href="new_link/1/">
  Страница c товаром номер 1
</a> 
```

### Пространство имён: **namespace**

Система имён для ссылок отлично работает, но что будет, если в разных приложениях у каких-то URL окажутся одинаковые `name`?

Например, в приложении `catalog` определён `name='product_list'`:

```python
# catalog/urls.py

urlpatterns = [
    path('', views.product_list, name='product_list'),
] 
```

…и в приложении `cart` («корзина») может быть указано то же значение `name` — для совершенно другой страницы:

```python
# cart/urls.py

urlpatterns = [
    path('', views.product_list, name='product_list'),
] 
```

Путаница неизбежна? Ничего подобного.

Чтобы избежать таких проблем — применяют параметр **namespace** (англ. «пространство имён»). Этот параметр определяет, к какому приложению относится `name` определённой ссылки.

Чтобы задать `namespace` для адресов определённого приложения, в _urls.py_ **подключаемого приложения** объявляют переменную `app_name` (это зарезервированное имя переменной), в которой указывают `namespace`.

Обычно значение `namespace` задают так, чтобы оно совпадало с названием приложения.

```python

# catalog/urls.py

# Указываем namespace для ссылок приложения:
app_name = 'catalog'

urlpatterns = [
    path('', views.product_list, name='product_list'),
] 
```

Теперь имя ссылки в шаблоне следует указывать так: `namespace:name`.

```django
<a href="{% url 'catalog:product_list' %}">
  Страница со списком товаров
</a> 
```

Просто. Понятно. Элегантно.

## На заметку

Узнать о `name` можно из [соответствующего раздела документации.](https://docs.djangoproject.com/en/3.2/topics/http/urls/#naming-url-patterns)

Много полезного о `namespace` можно найти [в официальной документации](https://docs.djangoproject.com/en/3.2/topics/http/urls/#url-namespaces-and-included-urlconfs).