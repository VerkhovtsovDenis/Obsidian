# История изменения кода

Когда программист работает над кодом, он вносит в него изменения и фиксирует их при помощи Git. Однако может случиться и такое, что после определённых изменений в коде в работе программы что-то пойдёт не так. В таком случае можно, используя возможности Git, вернуться к той версии проекта, которая работала корректно. Для этого нужно:

1. Получить информацию обо всех коммитах и найти тот коммит, после которого в работе кода возникли проблемы.
2. Просмотреть изменения, которые были сделаны в этом коммите.
3. Вернуться к коммиту, при котором в работе кода было всё в порядке.

Разберёмся, как это можно сделать.

## Данные коммита

Для того чтобы получить информацию о коммитах проекта _backend_test_homework_, находясь в любой папке проекта, выполните команду `git log` (англ. _log_, «журнал»):

Скопировать кодBASH

```
# Команда для просмотра истории коммитов.
git log

# Вывод в терминал.

# Идентификатор (хеш) коммита.
commit 0cde0f40afe27c9092c36b9f8f7d88a27fd918cc (HEAD -> master, origin/master, origin/HEAD)
# Автор коммита.
Author: User <user@yandex.ru>
# Дата проведения коммита.
Date:   Fri Jul 15 16:34:58 2022 +0300
# Сообщение к коммиту.
    delete new file

commit abeccbd51e48503feac5fc7d9954c6e6180e6629
Author: User <user@yandex.ru>>
Date:   Fri Jul 15 16:33:07 2022 +0300

    new file

commit 6bcb4d7020edb0e840dbdbc83c1f8c66fc8db71f
Author: User <user@yandex.ru>
Date:   Fri Jul 15 16:30:23 2022 +0300

    Added .gitignore file

commit 96c739551bab7281f34caf2f4e7512f5cb893bce
Author: User <user@yandex.ru>
Date:   Fri Jul 15 16:07:41 2022 +0300

    fix error 
```

❗ Если информации будет очень много, то, чтобы не пролистывать все строки до конца, для выхода из режима просмотра журнала можно нажать клавишу **Q** (от англ. _quit_, «выйти»).

## Show: что изменилось в файлах

Просмотреть изменения, внесённые в определённом коммите, можно командой `git show` (англ. _show_, «показать»). Она покажет не просто лог, а конкретные изменения в коде. Введите эту команду, а после неё укажите несколько первых символов идентификатора коммита, который вас интересует:

Скопировать кодBASH

```
# Эта команда выведет на экран изменения из указанного коммита.
$ git show id_коммита

# Пример вывода в терминал.

# Информация о коммите.
commit id_коммита
Author: User <user@yandex.ru>
Date:   Fri Jul 15 16:07:41 2022 +0300

    fix error
# Описание изменений.
diff --git a/program.py b/program.py
index e8af912..eec251c 100644
--- a/program.py
+++ b/program.py
@@ -1 +1 @@
# Исходная строка в изменённом файле.
-print('Я домашка'
# Строка с изменениями.
+print('Я домашка')
 
```

Чтобы посмотреть информацию о последнем коммите, выполните команду `git show` без указания идентификатора:

Скопировать кодBASH

```
git show
commit 0cde0f40afe27c9092c36b9f8f7d88a27fd918cc (HEAD -> master, origin/master, origin/HEAD)
Author: User <user@yandex.ru>
Date:   Fri Jul 15 16:34:58 2022 +0300

    delete new file

diff --git a/new.py b/new.py
deleted file mode 100644
index e69de29..0000000 
```

## Reset: отказ от изменений

Git — это машина времени. Git может вернуть ваш код в любое предыдущее состояние, если оно сохранено в коммите.

Чтобы вернуться к определённому коммиту, выполните команду `git reset` (англ. _reset_, «сброс в исходное состояние») и через пробел укажите, например, первые семь символов идентификатора нужного коммита, точно так же, как с командой `git show`:

Скопировать кодBASH

```
# Смотрим список коммитов.
git log 

# Вывод в терминал.
commit 0cde0f40afe27c9092c36b9f8f7d88a27fd918cc (HEAD -> master, origin/master, origin/HEAD)
# Автор коммита.
Author: User <user@yandex.ru>
# Дата проведения коммита.
Date:   Fri Jul 15 16:34:58 2022 +0300
# Сообщение к коммиту.
    delete new file

commit abeccbd51e48503feac5fc7d9954c6e6180e6629
Author: User <user@yandex.ru>>
Date:   Fri Jul 15 16:33:07 2022 +0300

    new file

# Откатываемся до коммита, в котором все файлы ещё на месте.
git reset abeccbd 
```

Можно откатиться на один коммит назад в определённом файле, указав его имя через HEAD:

Скопировать кодBASH

```
# Откатываем изменения до предыдущего коммита.
git reset HEAD program.py 
```

HEAD указывает на то, что работа будет вестись с последним сделанным коммитом.

Если не указать имя файла, то в репозитории сбросятся все изменения до состояния последнего коммита:

Скопировать кодBASH

```
# Откатываем изменения во всех файлах до предыдущего коммита.
git reset HEAD 
```

Какая команда выведет подробную информацию о конкретном коммите?

`git show` и первые семь символов хеша коммита.
Всё правильно, а узнать хеш коммита можно через команду `git log`.
